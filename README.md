# VBUtils - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –º–æ–¥–¥–∏–Ω–≥–∞ Valheim —Å Jotunn

–ù–∞–±–æ—Ä —É—Ç–∏–ª–∏—Ç –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–æ–≤ –¥–ª—è Valheim —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Jotunn. –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –æ–±—ä–µ–º –∫–æ–¥–∞ –¥–æ 10 —Ä–∞–∑, –¥–µ–ª–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –æ–±—ä–µ–∫—Ç–æ–≤ –±–æ–ª–µ–µ –ª–∞–∫–æ–Ω–∏—á–Ω–æ–π –∏ —É–¥–æ–±–Ω–æ–π.

## üì¶ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   - BepInex
   - Jotunn
   - VBUtills
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ILRepack —á–µ—Ä–µ–∑ NuGet: <PackageReference Include="ILRepack.Lib.MSBuild.Task" Version="2.0.18" />
3. –î–æ–±–∞–≤—å—Ç–µ VBUtills.dll –≤ –Ω–æ–≤—É—é –ø–∞–ø–∫—É "Libs" - –ü–ö–ú - Properties - "Content" = "Copy Always"
3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª ILRepack.targets –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```csharp
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Target Name="ILRepacker" AfterTargets="Build">
        <ItemGroup>
            <InputAssemblies Include="$(TargetPath)" />
            <InputAssemblies Include="$(OutputPath)\Libs\VBUtills.dll" />
        </ItemGroup>
        <ILRepack Parallel="true" DebugInfo="true" Internalize="true" InputAssemblies="@(InputAssemblies)" OutputFile="$(TargetPath)" TargetKind="SameAsPrimaryAssembly" LibraryPath="$(OutputPath)" />
    </Target>
</Project>
```

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìÅ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
- **`VB_AddPrefab`** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ—Ñ–∞–±–æ–≤ (—ç—Ñ—Ñ–µ–∫—Ç—ã, —Å—Ç–∞—Ç–∏—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã)
- **`VB_AddItem`** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –±–µ–∑ —Ä–µ—Ü–µ–ø—Ç–æ–≤
- **`VB_AddItemRecipe`** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å —Ä–µ—Ü–µ–ø—Ç–∞–º–∏ –∫—Ä–∞—Ñ—Ç–∞
- **`VB_AddCreatureWithConfig`** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –¥—Ä–æ–ø–∞ –∏ —Å–ø–∞–≤–Ω–∞
- **`VB_AddSE`** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- **`VB_AddPiece`** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ—Å—Ç—Ä–æ–µ–∫

### üîß –ü–∞—Ç—á–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **`Replace`** - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏
- **`AddEffect`** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
- **`ReplaceAnimator`** - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ç–æ—Ä–∞ –æ—Ç –¥–æ–Ω–æ—Ä–∞
- **`ReplaceFoot`** - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —à–∞–≥–æ–≤ –æ—Ç –¥–æ–Ω–æ—Ä–∞

### ‚ú® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è —à–µ–π–¥–µ—Ä–æ–≤** - –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤–æ –≤—Å–µ –º–µ—Ç–æ–¥—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å AssetBundle** - –µ–¥–∏–Ω—ã–π –º–µ—Ç–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ —Ä–µ—Å—É—Ä—Å–æ–≤

## üìã –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
```csharp
public static void Initialize()
{
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    RegisterPrefab.VB_AddPrefab("my_bundle", "sfx_build_hammer_wood", "vfx_Place_wood");
    RegisterPrefab.VB_AddItem("my_bundle", "Meat", "RawMeat");
    
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å —Ä–µ—Ü–µ–ø—Ç–∞–º–∏
    RegisterPrefab.VB_AddItemRecipe("my_bundle", 
        ("dual_axe_bronze", 1, new[] { 
            ("Bronze", 20, 10, true), 
            ("RoundLog", 2, 0, true) 
        }, CraftingStations.Forge, 1)
    );
    
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ—Å—Ç—Ä–æ–µ–∫
    RegisterPrefab.VB_AddPiece("my_bundle", PieceTables.Hammer, 
        PieceCategories.Building, CraftingStations.Workbench,
        ("roof", new[] { ("Resin", 2, true), ("Wood", 2, true) })
    );
    
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤
    RegisterPrefab.VB_AddCreatureWithConfig("my_bundle", 
        ("MyCreature", new CreatureConfig
        {
            DropConfigs = new DropConfig[]
            {
                new DropConfig { 
                    Item = "TrophyCultist", 
                    MinAmount = 1, 
                    MaxAmount = 1, 
                    Chance = 10 
                }
            },
            SpawnConfigs = new SpawnConfig[]
            {
                new SpawnConfig
                {
                    Biome = Heightmap.Biome.Meadows,
                    SpawnChance = 20,
                    MaxSpawned = 2
                }
            }
        })
    );
    
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤
    RegisterPrefab.VB_AddSE("my_bundle", "SE_Debuff_1", "SE_Debuff_2");
}
```

### –ü–∞—Ç—á–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```csharp
[HarmonyPatch(typeof(ZNetScene), nameof(ZNetScene.Awake))]
[HarmonyPostfix]
public static void PatchZNetScene()
{
    // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π
    ComponentPatch.ReplaceAnimator("MyCustomMob", "Ulv");
    
    // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
    ComponentPatch.Replace<Humanoid>("MyCustomMob", "Ulv", (custom, vanilla) =>
    {
        custom.m_hitEffects.m_effectPrefabs = vanilla.m_hitEffects.m_effectPrefabs;
        custom.m_critHitEffects.m_effectPrefabs = vanilla.m_critHitEffects.m_effectPrefabs;
    });
    
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
    ComponentPatch.AddEffect<Humanoid>("MyCustomMob", "sfx_death", h => h.m_deathEffects);
    
    // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —à–∞–≥–æ–≤
    ComponentPatch.ReplaceFoot("MyCustomMob", "Fenring_Cultist");
}
```

## üìù –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è —à–µ–π–¥–µ—Ä–æ–≤
–í—Å–µ –º–µ—Ç–æ–¥—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–µ–π–¥–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ `ShaderFix.Replace()`. –†—É—á–Ω–æ–π –≤—ã–∑–æ–≤ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

### –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å AssetBundle
- –ï–¥–∏–Ω—ã–π –º–µ—Ç–æ–¥ `AssetBundleGet.LoadPrefabFromBundles()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –ª—é–±—ã—Ö –±–∞–Ω–¥–ª–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –±–∞–Ω–¥–ª–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏

### –ì–∏–±–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤
–ú–µ—Ç–æ–¥ `VB_AddCreatureWithConfig` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- –°—É—â–µ—Å—Ç–≤ –±–µ–∑ –¥—Ä–æ–ø–∞ –∏ —Å–ø–∞–≤–Ω–∞ (–ø—É—Å—Ç–æ–π `CreatureConfig`)
- –¢–æ–ª—å–∫–æ –¥—Ä–æ–ø –∏–ª–∏ —Ç–æ–ª—å–∫–æ —Å–ø–∞–≤–Ω
- –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Å–ø–∞–≤–Ω–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å—É—â–µ—Å—Ç–≤–∞
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—É—â–µ—Å—Ç–≤ –∑–∞ –æ–¥–∏–Ω –≤—ã–∑–æ–≤

## üêõ –û—Ç–ª–∞–¥–∫–∞

–£—Ç–∏–ª–∏—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è:
- –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ AssetBundle
- –û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ—Ñ–∞–±–æ–≤
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —à–µ–π–¥–µ—Ä–æ–≤

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å BepInEx –∏–ª–∏ —Ñ–∞–π–ª `BepInEx/LogOutput.log`.

## ü§ù –í–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –≤–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/AmazingFeature`)
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. –ó–∞–ø—É—à–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –≤ —Ñ–∞–π–ª–µ LICENSE.

---

## üí° –°–æ–≤–µ—Ç—ã

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã** –¥–ª—è –∏–º–µ–Ω –±–∞–Ω–¥–ª–æ–≤ –∏ –ø—Ä–µ—Ñ–∞–±–æ–≤, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ–ø–µ—á–∞—Ç–æ–∫
2. **–ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** –ø–æ —Ç–∏–ø–∞–º –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –º–æ–¥—ã** –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã** –≤–º–µ—Å—Ç–æ `null` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ BepInEx –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –∏–º–µ–Ω –ø—Ä–µ—Ñ–∞–±–æ–≤ –≤ AssetBundle
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π Jotunn
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

---

–° –ø–æ–º–æ—â—å—é VBUtils –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –∞ –Ω–µ –Ω–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ Valheim!
